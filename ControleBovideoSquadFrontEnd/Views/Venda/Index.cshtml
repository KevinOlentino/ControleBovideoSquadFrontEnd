<div class="container col-xxl-8 px-4 py-4">
  <h1 class="display-5 text-center">Lista de registro de vendas</h1>
  <p class="blockquote-footer text-center">
    Selecione uma venda para acessar as informações
  </p>
</div>
<div>
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th>Quantidade</th>
                <th>Propriedade de origem</th>
                <th>Propriedade de destino</th>
                <th>Finalidade da venda</th>
                <th>Data de venda</th>
            </tr>
        </thead>
        <tbody data-bind="foreach: vendas">
            <tr>
                <td data-bind="text: $data.quantidade"></td>
                <td data-bind="text: $data.propriedadeOrigem.nome"></td>
                <td data-bind="text: $data.propriedadeDestino.nome"></td>
                <td data-bind="text: $data.finalidadeDeVenda.nome"></td>
                <td data-bind="text: formatarData($data.dataDeVenda)"></td>
            </tr>
        </tbody>
    </table>
</div>
<script>
    function appViewModel() {
        this.vendas = ko.observableArray();
        $.get('https://localhost:7168/api/venda', data => {
            this.vendas(data)
            console.log(data)
        })
    }

    function formatarData(data){
        var data = new Date(data),
        dia  = data.getDate().toString(),
        diaF = (dia.length == 1) ? '0'+dia : dia,
        mes  = (data.getMonth()+1).toString(), //+1 pois no getMonth Janeiro começa com zero.
        mesF = (mes.length == 1) ? '0'+mes : mes,
        anoF = data.getFullYear();
        return diaF+"/"+mesF+"/"+anoF;
    }
    
    ko.applyBindings(new appViewModel())
</script>
